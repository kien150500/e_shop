{% extends 'store/base.html' %}

{% block title %}{{ product.name }} - E-Shop{% endblock %}

{% block content %}
    <a href="/">&larr; Quay lại danh sách sản phẩm</a>

    <h2>{{ product.name }}</h2>

    {% if product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-width: 350px; display:block; margin-bottom: 15px;">
    {% endif %}

    <p class="price">${{ product.price }}</p>
    <p>{{ product.description }}</p>

    <form action="{% url 'cart_add' product.id %}" method="post" style="margin-top:15px;">
        {% csrf_token %}
        <label>
            Số lượng:
            <input type="number" name="quantity" value="1" min="1" style="width:60px;">
        </label>
        <button type="submit">Thêm vào giỏ</button>
    </form>


    <p style="margin-top:10px;">
        <a href="{% url 'cart_detail' %}">Xem giỏ hàng</a>
    </p>

    <h3>Related Products</h3>
    <div class="product-list">
        {% for p in related_products %}
            <div class="product-card">
                {% if p.image %}
                    <img src="{{ p.image.url }}" alt="{{ p.name }}">
                {% endif %}
                <h4><a href="{% url 'product_detail' p.slug %}">{{ p.name }}</a></h4>
                <p class="price">${{ p.price }}</p>
            </div>
        {% empty %}
            <p>Không có sản phẩm liên quan.</p>
        {% endfor %}
    </div>

    <h3>You can like</h3>
    <div class="product-list">
        {% for p in suggested %}
            <div class="product-card">
                {% if p.image %}
                    <img src="{{ p.image.url }}" alt="{{ p.name }}">
                {% endif %}
                <h4><a href="{% url 'product_detail' p.slug %}">{{ p.name }}</a></h4>
                <p class="price">${{ p.price }}</p>
            </div>
        {% empty %}
            <p>Chưa có gợi ý.</p>
        {% endfor %}
    </div>

    
{% endblock %}
